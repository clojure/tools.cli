<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>clojure.tools.cli - tools.cli 1.0.220-SNAPSHOT API documentation</title>
    <link rel="icon" href="static/favicon.png" />
    <link rel="shortcut icon" href="static/favicon.png" />
    <link rel="stylesheet" href="static/clojure.css" type="text/css" media="all" />
    <link rel="stylesheet" href="static/wiki.css" type="text/css" media="all" />
    <link rel="stylesheet" href="static/internal.css" type="text/css" media="all" />
    <style>.menuWrapper{height: 36px;}</style>
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a href="index.html" id="Logo"><img src="static/clojure-icon.gif" width="100" height="100" alt="Clojure" /></a>
	<h1><a href="index.html" id="page-header" title="page header title">tools.cli API Reference</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <span class="toc-header"><span id="project-name">tools.cli</span> <span id="version">1.0.220-SNAPSHOT</span> API</span><br />
    <ul>
      <li><a href="index.html" class="wiki_link">Overview</a></li>
      <li><a href="api-index.html" class="wiki_link">API Index</a></li>
    </ul>
    
    
    <a class="wiki_link" href="https://clojure.org">Clojure Home</a>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div class="wiki wikiPage" id="content_view">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#toc0">Overview</a>
    
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#"></a>
    
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#"></a>
    
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#var-section">Vars and Functions</a>
    <div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.tools.cli/cli" class="toc-entry-anchor">cli</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.tools.cli/format-lines" class="toc-entry-anchor">format-lines</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.tools.cli/get-default-options" class="toc-entry-anchor">get-default-options</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.tools.cli/make-summary-part" class="toc-entry-anchor">make-summary-part</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.tools.cli/parse-opts" class="toc-entry-anchor">parse-opts</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.tools.cli/summarize" class="toc-entry-anchor">summarize</a>
      
    </div>
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#"></a>
    
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="clojure.tools.cli">clojure.tools.cli</span>
  - <span id="header-project">tools.cli</span> <span id="header-version">1.0.220-SNAPSHOT</span><span id="header-status-block"> (<span id="header-status">in development</span>)</span>
  </h1>
<span id="author-line">by <span id="author-name">Gareth Jones, Sung Pae, Sean Corfield</span><br /></span>
<br />Full namespace name: <span id="long-name">clojure.tools.cli</span>
<p></p>
<h2>Overview</h2>
<div id="home-page">Project home page is <a href="https://github.com/clojure/tools.cli/">https://github.com/clojure/tools.cli/</a></div>
<pre id="namespace-docstr">Tools for working with command line arguments.</pre>


<br />



<div id="var-section">
  <p></p>
  <h2>Public Variables and Functions</h2>
  <div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.tools.cli/cli">cli</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (cli args &amp; specs)
</pre>
    <pre id="var-docstr">THIS IS A LEGACY FUNCTION and may be deprecated in the future. Please use
clojure.tools.cli/parse-opts in new applications.

Parse the provided args using the given specs. Specs are vectors
describing a command line argument. For example:

["-p" "--port" "Port to listen on" :default 3000 :parse-fn #(Integer/parseInt %)]

First provide the switches (from least to most specific), then a doc
string, and pairs of options.

Valid options are :default, :parse-fn, and :flag. See
<a href="https://github.com/clojure/tools.cli/wiki/Documentation-for-0.2.4">https://github.com/clojure/tools.cli/wiki/Documentation-for-0.2.4</a> for more
detailed examples.

Returns a vector containing a map of the parsed arguments, a vector
of extra arguments that did not match known switches, and a
documentation banner to provide usage instructions.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/tools.cli/blob/a206f00b0bd2da4b40e3d7ce9510bdc5019a7928/src/main/clojure/clojure/tools/cli.cljc#L206">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.tools.cli/format-lines">format-lines</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (format-lines lens parts)
</pre>
    <pre id="var-docstr">Format a sequence of summary parts into columns. lens is a sequence of
lengths to use for parts. There are two sequences of lengths if we are
not displaying defaults. There are three sequences of lengths if we
are showing defaults.</pre>
    <pre id="var-specs"></pre>
    <span class="var-added"><span id="content">Added in tools.cli version 0.3.0</span><br /></span>
    
    <a id="var-source" href="https://github.com/clojure/tools.cli/blob/a206f00b0bd2da4b40e3d7ce9510bdc5019a7928/src/main/clojure/clojure/tools/cli.cljc#L522">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.tools.cli/get-default-options">get-default-options</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (get-default-options option-specs)
</pre>
    <pre id="var-docstr">Extract the map of default options from a sequence of option vectors.

As of 0.4.1, this also applies any :default-fn present.</pre>
    <pre id="var-specs"></pre>
    <span class="var-added"><span id="content">Added in tools.cli version 0.3.2</span><br /></span>
    
    <a id="var-source" href="https://github.com/clojure/tools.cli/blob/a206f00b0bd2da4b40e3d7ce9510bdc5019a7928/src/main/clojure/clojure/tools/cli.cljc#L555">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.tools.cli/make-summary-part">make-summary-part</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (make-summary-part show-defaults? spec)
</pre>
    <pre id="var-docstr">Given a single compiled option spec, turn it into a formatted string,
optionally with its default values if requested.</pre>
    <pre id="var-specs"></pre>
    <span class="var-added"><span id="content">Added in tools.cli version 0.3.0</span><br /></span>
    
    <a id="var-source" href="https://github.com/clojure/tools.cli/blob/a206f00b0bd2da4b40e3d7ce9510bdc5019a7928/src/main/clojure/clojure/tools/cli.cljc#L498">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.tools.cli/parse-opts">parse-opts</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (parse-opts args option-specs &amp; options)
</pre>
    <pre id="var-docstr">Parse arguments sequence according to given option specifications and the
GNU Program Argument Syntax Conventions:

  <a href="https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html">https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html</a>

Option specifications are a sequence of vectors with the following format:

  [short-opt long-opt-with-required-description description
   :property value]

The first three string parameters in an option spec are positional and
optional, and may be nil in order to specify a later parameter.

By default, options are toggles that default to nil, but the second string
parameter may be used to specify that an option requires an argument.

  e.g. ["-p" "--port PORT"] specifies that --port requires an argument,
       of which PORT is a short description.

The :property value pairs are optional and take precedence over the
positional string arguments. The valid properties are:

  :id           The key for this option in the resulting option map. This
                is normally set to the keywordized name of the long option
                without the leading dashes.

                Multiple option entries can share the same :id in order to
                transform a value in different ways, but only one of these
                option entries may contain a :default(-fn) entry.

                This option is mandatory.

  :short-opt    The short format for this option, normally set by the first
                positional string parameter: e.g. "-p". Must be unique.

  :long-opt     The long format for this option, normally set by the second
                positional string parameter; e.g. "--port". Must be unique.

  :required     A description of the required argument for this option if
                one is required; normally set in the second positional
                string parameter after the long option: "--port PORT".

                The absence of this entry indicates that the option is a
                boolean toggle that is set to true when specified on the
                command line.

  :missing      Indicates that this option is required (not just an argument),
                and provides the string to use as an error message if omitted.

  :desc         A optional short description of this option.

  :default      The default value of this option. If none is specified, the
                resulting option map will not contain an entry for this
                option unless set on the command line. Also see :default-fn
                (below).

                This default is applied before any arguments are parsed so
                this is a good way to seed values for :assoc-fn or :update-fn
                as well as the simplest way to provide defaults.

                If you need to compute a default based on other command line
                arguments, or you need to provide a default separate from the
                seed for :assoc-fn or :update-fn, see :default-fn below.

  :default-desc An optional description of the default value. This should be
                used when the string representation of the default value is
                too ugly to be printed on the command line, or :default-fn
                is used to compute the default.

  :default-fn   A function to compute the default value of this option, given
                the whole, parsed option map as its one argument. If no
                function is specified, the resulting option map will not
                contain an entry for this option unless set on the command
                line. Also see :default (above).

                If both :default and :default-fn are provided, if the
                argument is not provided on the command-line, :default-fn will
                still be called (and can override :default).

  :parse-fn     A function that receives the required option argument and
                returns the option value.

                If this is a boolean option, parse-fn will receive the value
                true. This may be used to invert the logic of this option:

                ["-q" "--quiet"
                 :id :verbose
                 :default true
                 :parse-fn not]

  :assoc-fn     A function that receives the current option map, the current
                option :id, and the current parsed option value, and returns
                a new option map. The default is 'assoc'.

                For non-idempotent options, where you need to compute a option
                value based on the current value and a new value from the
                command line. If you only need the the current value, consider
                :update-fn (below).

                You cannot specify both :assoc-fn and :update-fn for an
                option.

  :update-fn    Without :multi true:

                A function that receives just the existing parsed option value,
                and returns a new option value, for each option :id present.
                The default is 'identity'.

                This may be used to create non-idempotent options where you
                only need the current value, like setting a verbosity level by
                specifying an option multiple times. ("-vvv" -&gt; 3)

                ["-v" "--verbose"
                 :default 0
                 :update-fn inc]

                :default is applied first. If you wish to omit the :default
                option value, use fnil in your :update-fn as follows:

                ["-v" "--verbose"
                 :update-fn (fnil inc 0)]

                With :multi true:

                A function that receives both the existing parsed option value,
                and the parsed option value from each instance of the option,
                and returns a new option value, for each option :id present.
                The :multi option is ignored if you do not specify :update-fn.

                For non-idempotent options, where you need to compute a option
                value based on the current value and a new value from the
                command line. This can sometimes be easier than use :assoc-fn.

                ["-f" "--file NAME"
                 :default []
                 :update-fn conj
                 :multi true]

                :default is applied first. If you wish to omit the :default
                option value, use fnil in your :update-fn as follows:

                ["-f" "--file NAME"
                 :update-fn (fnil conj [])
                 :multi true]

                Regardless of :multi, you cannot specify both :assoc-fn
                and :update-fn for an option.

  :multi        true/false, applies only to options that use :update-fn.

  :validate     A vector of [validate-fn validate-msg ...]. Multiple pairs
                of validation functions and error messages may be provided.

  :validate-fn  A vector of functions that receives the parsed option value
                and returns a falsy value or throws an exception when the
                value is invalid. The validations are tried in the given
                order.

  :validate-msg A vector of error messages corresponding to :validate-fn
                that will be added to the :errors vector on validation
                failure. Can be plain strings, or functions to be applied
                to the (invalid) option argument to produce a string.

  :post-validation true/false. By default, validation is performed after
                parsing an option, prior to assoc/default/update processing.
                Specifying true here will cause the validation to be
                performed after assoc/default/update processing, instead.

parse-opts returns a map with four entries:

  {:options     The options map, keyed by :id, mapped to the parsed value
   :arguments   A vector of unprocessed arguments
   :summary     A string containing a minimal options summary
   :errors      A possible vector of error message strings generated during
                parsing; nil when no errors exist}

A few function options may be specified to influence the behavior of
parse-opts:

  :in-order     Stop option processing at the first unknown argument. Useful
                for building programs with subcommands that have their own
                option specs.

  :no-defaults  Only include option values specified in arguments and do not
                include any default values in the resulting options map.
                Useful for parsing options from multiple sources; i.e. from a
                config file and from the command line.

  :strict       Parse required arguments strictly: if a required argument value
                matches any other option, it is considered to be missing (and
                you have a parse error).

  :summary-fn   A function that receives the sequence of compiled option specs
                (documented at #'clojure.tools.cli/compile-option-specs), and
                returns a custom option summary string.
</pre>
    <pre id="var-specs"></pre>
    <span class="var-added"><span id="content">Added in tools.cli version 0.3.0</span><br /></span>
    
    <a id="var-source" href="https://github.com/clojure/tools.cli/blob/a206f00b0bd2da4b40e3d7ce9510bdc5019a7928/src/main/clojure/clojure/tools/cli.cljc#L570">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.tools.cli/summarize">summarize</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (summarize specs)
</pre>
    <pre id="var-docstr">Reduce options specs into a options summary for printing at a terminal.
Note that the specs argument should be the compiled version. That effectively
means that you shouldn't call summarize directly. When you call parse-opts
you get back a :summary key which is the result of calling summarize (or
your user-supplied :summary-fn option) on the compiled option specs.</pre>
    <pre id="var-specs"></pre>
    <span class="var-added"><span id="content">Added in tools.cli version 0.3.0</span><br /></span>
    
    <a id="var-source" href="https://github.com/clojure/tools.cli/blob/a206f00b0bd2da4b40e3d7ce9510bdc5019a7928/src/main/clojure/clojure/tools/cli.cljc#L539">Source</a>
  </div>
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div id="copyright" style="text-align: center;">Copyright 2007-2023 by Rich Hickey and the various contributors</div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a href="http://www.tomhickey.com" title="Visit Tom Hickey's website.">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>